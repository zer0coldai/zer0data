services:
  sync:
    build:
      context: ../..
      dockerfile: docker/sync/Dockerfile
    container_name: zer0data-sync
    volumes:
      - ../../data/download:/data
      - ../../data/logs:/logs
      - ~/.ssh:/tmp/.ssh-mount:ro
    environment:
      LOCAL_DATA_DIR: /data
      LOCAL_STATE_DIR: /data/_ingested
      LOCAL_LOG_DIR: /logs
      CLICKHOUSE_HOST: host.docker.internal
      CLICKHOUSE_PORT: 8123
      CLICKHOUSE_DB: zer0data
    logging:
      driver: "json-file"
      options:
        max-size: "100m"
        max-file: "5"
